"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[101],{6101:(e,s,l)=>{l.r(s),l.d(s,{default:()=>O});var r=l(5043),t=l(6557),a=l(8139),o=l.n(a);const n={selected:"Paginator_selected__VJupa",pageNumbers:"Paginator_pageNumbers__7ZL6C",pageNumbersArea:"Paginator_pageNumbersArea__Bl2aW",arrows:"Paginator_arrows__3ShEi"};var i=l(3892);var c=l(8008),d=l(7863),u=l(3003),m=l(8271),g=l(682),p=l(9905),h=l(579);const x=e=>{let{totalUsersCount:s,pageSize:l,portionSize:t=10,activePage:a,filter:x={term:"",isFriend:"All"}}=e;const j=(0,u.wA)();let _=Math.ceil(s/l),f=[];for(let r=1;r<=_;r++)f.push(r);let N=Math.ceil(_/t),[b,w]=(0,r.useState)(1),[v,A]=(0,r.useState)(a),[P,U]=(0,r.useState)(x),k=(b-1)*t+1,F=b*t;(0,r.useEffect)((()=>{j((0,d.AI)(v,l,P)),console.log(v)}),[v]),(0,r.useEffect)((()=>{1===v?j((0,d.AI)(v,l,P)):(w(1),A(1)),console.log(P)}),[P]);const S=()=>(0,h.jsx)(i.l1,{initialValues:{pageNumber:""},onSubmit:e=>{A(e.pageNumber),w(Math.ceil(e.pageNumber/t))},children:()=>{return(0,h.jsxs)(i.lV,{children:[(0,h.jsx)(i.D0,{validate:(e=_,s=>{let l;return s?/^[0-9]{1,10}$/i.test(s.toString())?(s<1||s>e)&&(l="Out of bounds"):l="Incorrect symbols":l="Required",l}),name:"pageNumber",placeholder:"1...".concat(_),component:c.U}),(0,h.jsx)("button",{type:"submit",children:"Find"})]});var e}}),C=()=>(0,h.jsx)(i.l1,{enableReinitialize:!0,initialValues:{term:P.term,isFriend:P.isFriend},onSubmit:e=>{U(e)},children:()=>(0,h.jsxs)(i.lV,{children:[(0,h.jsx)(i.D0,{name:"term",placeholder:"Type username",component:c.U}),(0,h.jsxs)(i.D0,{name:"isFriend",as:"select",children:[(0,h.jsx)("option",{value:"All",children:"All"}),(0,h.jsx)("option",{value:"Followed",children:"Followed"}),(0,h.jsx)("option",{value:"NotFollowed",children:"Not followed"})]}),(0,h.jsx)("button",{type:"submit",children:"Change"})]})});return(0,h.jsxs)("div",{className:n.pageNumbersArea,children:[(0,h.jsx)(C,{}),b>1&&(0,h.jsx)(m.Ay,{className:n.arrows,onClick:()=>{A(k-t),w(b-1)},icon:(0,h.jsx)(g.A,{})}),f.filter((e=>e>=k&&e<=F)).map((e=>(0,h.jsx)("span",{className:o()({[n.selected]:v===e},n.pageNumbers),onClick:()=>{A(e)},children:e},e))),b<N&&(0,h.jsx)(m.Ay,{className:n.arrows,onClick:()=>{A(F+1),w(b+1)},classNames:n.arrow,icon:(0,h.jsx)(p.A,{})}),(0,h.jsx)(S,{})]})},j="User_userBlock__8AOoM",_="User_followBlock__gVlaJ",f="User_round__zcJZ5",N="User_infoBlock__6IVxd",b="User_name__QVH0B",w="User_status__55oVY";var v=l(5558),A=l(5475);const P=e=>{let{user:s,followingInProgress:l,followUser:r,unfollowUser:t}=e;return(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:j,children:[(0,h.jsxs)("div",{className:_,children:[(0,h.jsx)(A.N_,{to:"/profile/"+s.id,children:(0,h.jsx)("img",{alt:"user",className:f,src:s.photos.small?s.photos.small:v})}),(0,h.jsx)("div",{children:s.followed?(0,h.jsx)(m.Ay,{disabled:l.some((e=>e===s.id)),onClick:()=>{t(s.id)},children:"UNFOLLOW"}):(0,h.jsx)(m.Ay,{disabled:l.some((e=>e===s.id)),onClick:()=>{r(s.id)},children:"FOLLOW"})})]}),(0,h.jsxs)("div",{className:N,children:[(0,h.jsx)("div",{className:b,children:s.name}),(0,h.jsx)("div",{className:w,children:s.status})]})]},s.id)})};const U=(0,l(2099).Mz)((e=>e.usersPage.users),(e=>e.filter((e=>!0)))),k=e=>e.usersPage.pageSize,F=e=>e.usersPage.totalUsersCount,S=e=>e.usersPage.currentPage,C=e=>e.usersPage.isFetched,V=e=>e.usersPage.followingInProgress,y=e=>e.usersPage.filter;var z=l(3216);const I=()=>{const e=(0,u.d4)(F),s=(0,u.d4)(k),l=(0,u.d4)(C),a=(0,u.d4)(S),o=(0,u.d4)(U),n=(0,u.d4)(y),i=(0,u.d4)(V),c=(0,u.wA)(),m=(0,z.Zp)(),[g,p]=(0,A.ok)();(0,r.useEffect)((()=>{let e=[!1,!1,!1],s=["","",""],l="";"All"!==n.isFriend&&(l="friend=".concat(n.isFriend),e[0]=!0);let r="";""!==n.term&&(r="term=".concat(n.term),e[1]=!0);let t="";1!==a&&(t="page=".concat(a),e[2]=!0),(e[0]||e[1]||e[2])&&(s[0]="?",(e[0]&&e[1]||e[0]&&e[2])&&(s[1]="&",e[1]&&e[2]&&(s[2]="&"))),m("/users".concat(s[0]).concat(l).concat(s[1]).concat(r).concat(s[2]).concat(t))}),[n,a,m]),(0,r.useEffect)((()=>{const e=Number(g.get("page")),l=String(g.get("term")),r=g.get("friend");let t=a,o=n;e&&(t=e),l&&"null"!==l&&(o={...o,term:l}),r&&(o={...o,isFriend:r}),c((0,d.AI)(t,s,o))}),[]);const j=e=>{c((0,d.pV)(e))},_=e=>{c((0,d.Qt)(e))};return(0,h.jsxs)("div",{children:[l?(0,h.jsx)(t.A,{}):null,(0,h.jsx)(x,{portionSize:10,totalUsersCount:e,pageSize:s,activePage:a,filter:n}),o.map((e=>(0,h.jsx)(P,{user:e,followUser:j,unfollowUser:_,followingInProgress:i},e.id)))]})};const O=(0,l(1719).H)((()=>(0,h.jsx)(I,{})))}}]);
//# sourceMappingURL=101.c43f3016.chunk.js.map