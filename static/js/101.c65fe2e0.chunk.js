"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[101],{6101:(e,s,r)=>{r.r(s),r.d(s,{default:()=>O});var l=r(5043),t=r(6557),a=r(8139),n=r.n(a);const o={selected:"Paginator_selected__VJupa",pageNumbers:"Paginator_pageNumbers__7ZL6C",pageNumbersArea:"Paginator_pageNumbersArea__Bl2aW",arrows:"Paginator_arrows__3ShEi"};var i=r(3892);var c=r(8008),d=r(7863),u=r(3003),m=r(8271),g=r(682),p=r(9905),x=r(579);const h=e=>{let{totalUsersCount:s,pageSize:r,portionSize:t=10,currentPage:a,filter:h={term:"",isFriend:"All"}}=e;const j=(0,u.wA)();let _=Math.ceil(s/r),f=[];for(let l=1;l<=_;l++)f.push(l);let N=Math.ceil(_/t),[w,b]=(0,l.useState)(1),A=(w-1)*t+1,v=w*t;const P=()=>(0,x.jsx)(i.l1,{initialValues:{pageNumber:""},onSubmit:e=>{let s=e.pageNumber;j((0,d.AI)(s,r,h)),b(Math.ceil(s/t))},children:()=>{return(0,x.jsxs)(i.lV,{children:[(0,x.jsx)(i.D0,{validate:(e=_,s=>{let r;return s?/^[0-9]{1,10}$/i.test(s.toString())?(s<1||s>e)&&(r="Out of bounds"):r="Incorrect symbols":r="Required",r}),name:"pageNumber",placeholder:"1...".concat(_),component:c.U}),(0,x.jsx)("button",{type:"submit",children:"Find"})]});var e}}),U=()=>(0,x.jsx)(i.l1,{enableReinitialize:!0,initialValues:{term:h.term,isFriend:h.isFriend},onSubmit:e=>{j((0,d.AI)(1,r,e))},children:()=>(0,x.jsxs)(i.lV,{children:[(0,x.jsx)(i.D0,{name:"term",placeholder:"Type username",component:c.U}),(0,x.jsxs)(i.D0,{name:"isFriend",as:"select",children:[(0,x.jsx)("option",{value:"All",children:"All"}),(0,x.jsx)("option",{value:"Followed",children:"Followed"}),(0,x.jsx)("option",{value:"NotFollowed",children:"Not followed"})]}),(0,x.jsx)("button",{type:"submit",children:"Find"})]})});return(0,x.jsxs)("div",{className:o.pageNumbersArea,children:[w>1&&(0,x.jsx)(m.Ay,{className:o.arrows,onClick:()=>{let e=A-t;j((0,d.AI)(e,r,h)),b(w-1)},icon:(0,x.jsx)(g.A,{})}),f.filter((e=>e>=A&&e<=v)).map((e=>(0,x.jsx)("span",{className:n()({[o.selected]:a===e},o.pageNumbers),onClick:()=>{j((0,d.AI)(e,r,h))},children:e},e))),w<N&&(0,x.jsx)(m.Ay,{className:o.arrows,onClick:()=>{let e=v+1;j((0,d.AI)(e,r,h)),b(w+1)},classNames:o.arrow,icon:(0,x.jsx)(p.A,{})}),(0,x.jsx)(P,{}),(0,x.jsx)(U,{})]})},j="User_userBlock__8AOoM",_="User_followBlock__gVlaJ",f="User_round__zcJZ5",N="User_infoBlock__6IVxd",w="User_name__QVH0B",b="User_status__55oVY";var A=r(5558),v=r(5475);const P=e=>{let{user:s,followingInProgress:r,followUser:l,unfollowUser:t}=e;return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:j,children:[(0,x.jsxs)("div",{className:_,children:[(0,x.jsx)(v.N_,{to:"/profile/"+s.id,children:(0,x.jsx)("img",{alt:"user",className:f,src:s.photos.small?s.photos.small:A})}),(0,x.jsx)("div",{children:s.followed?(0,x.jsx)(m.Ay,{disabled:r.some((e=>e===s.id)),onClick:()=>{t(s.id)},children:"UNFOLLOW"}):(0,x.jsx)(m.Ay,{disabled:r.some((e=>e===s.id)),onClick:()=>{l(s.id)},children:"FOLLOW"})})]}),(0,x.jsxs)("div",{className:N,children:[(0,x.jsx)("div",{className:w,children:s.name}),(0,x.jsx)("div",{className:b,children:s.status})]})]},s.id)})};const U=(0,r(2099).Mz)((e=>e.usersPage.users),(e=>e.filter((e=>!0)))),k=e=>e.usersPage.pageSize,F=e=>e.usersPage.totalUsersCount,C=e=>e.usersPage.currentPage,I=e=>e.usersPage.isFetched,S=e=>e.usersPage.followingInProgress,V=e=>e.usersPage.filter;var y=r(3216);const z=()=>{const e=(0,u.d4)(F),s=(0,u.d4)(k),r=(0,u.d4)(I),a=(0,u.d4)(C),n=(0,u.d4)(U),o=(0,u.d4)(V),i=(0,u.d4)(S),c=(0,u.wA)(),m=(0,y.Zp)(),[g,p]=(0,v.ok)();(0,l.useEffect)((()=>{let e=[!1,!1,!1],s=["","",""],r="";"All"!==o.isFriend&&(r="friend=".concat(o.isFriend),e[0]=!0);let l="";""!==o.term&&(l="term=".concat(o.term),e[1]=!0);let t="";1!==a&&(t="page=".concat(a),e[2]=!0),(e[0]||e[1]||e[2])&&(s[0]="?",(e[0]&&e[1]||e[0]&&e[2])&&(s[1]="&",e[1]&&e[2]&&(s[2]="&"))),m("/users".concat(s[0]).concat(r).concat(s[1]).concat(l).concat(s[2]).concat(t))}),[o,a,m]),(0,l.useEffect)((()=>{const e=Number(g.get("page")),r=String(g.get("term")),l=g.get("friend");let t=a,n=o;e&&(t=e),r&&"null"!==r&&(n={...n,term:r}),l&&(n={...n,isFriend:l}),c((0,d.AI)(t,s,n))}),[]);const j=e=>{c((0,d.pV)(e))},_=e=>{c((0,d.Qt)(e))};return(0,x.jsxs)("div",{children:[r?(0,x.jsx)(t.A,{}):null,(0,x.jsx)(h,{portionSize:10,totalUsersCount:e,pageSize:s,currentPage:a,filter:o}),n.map((e=>(0,x.jsx)(P,{user:e,followUser:j,unfollowUser:_,followingInProgress:i},e.id)))]})};const O=(0,r(1719).H)((()=>(0,x.jsx)(z,{})))}}]);
//# sourceMappingURL=101.c65fe2e0.chunk.js.map